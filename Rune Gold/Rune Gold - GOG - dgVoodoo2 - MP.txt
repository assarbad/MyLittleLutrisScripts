files:
- mod: https://github.com/legluondunet/MyLittleLutrisScripts/raw/master/Rune%20Gold/rg_d3d9_renderer.zip
- gogsetup: N/A:Select RUNE Gold setup exe file downloaded from your GOG games library
    page or download it from https://www.gog.com/downloads/rune_classic/25813
- script: https://github.com/legluondunet/MyLittleLutrisScripts/raw/master/Rune%20Gold/run_lang_script.sh
- game_conf: https://github.com/legluondunet/MyLittleLutrisScripts/raw/refs/heads/master/Rune%20Gold/Default.ini
- fov_files: https://github.com/legluondunet/MyLittleLutrisScripts/raw/refs/heads/master/Rune%20Gold/rune_gold_fov.zip
- wrapper: https://github.com/legluondunet/mlls-tools/raw/master/dgVoodoo2/dgVoodoo2_79_3.zip
game:
  exe: drive_c/GOG Games/Rune Gold/System/Rune.exe
  prefix: $GAMEDIR
installer:
- task:
    arch: win64
    name: create_prefix
    prefix: $GAMEDIR
- extract:
    dst: $GAMEDIR/drive_c/GOG Games/Rune Gold
    file: gogsetup
    format: gog
- extract:
    dst: $GAMEDIR/drive_c/GOG Games/Rune Gold/System
    file: mod
- extract:
    dst: $CACHE
    file: fov_files
- input_menu:
    description: Select your resolution ratio
    id: RATIO
    options:
    - 169: 16/9
    - 1610: 16/10
    - 43: 4/3
    preselect: 43
- merge:
    dst: $GAMEDIR/drive_c/GOG Games/Rune Gold/System/backup
    src: $GAMEDIR/drive_c/GOG Games/Rune Gold/System/DefUser.ini
- move:
    dst: $GAMEDIR/drive_c/GOG Games/Rune Gold/System/backup
    src: $GAMEDIR/drive_c/GOG Games/Rune Gold/System/User.ini
- merge:
    dst: $GAMEDIR/drive_c/GOG Games/Rune Gold/System
    src: $CACHE/$INPUT_RATIO
- input_menu:
    description: Select your preferred language
    id: LANG
    options:
    - int: English
    - frt: French
    - itt: Italian
    - det: german
    - est: spanish
    - rut: russian
    preselect: int
- chmodx: script
- execute:
    args: $INPUT_LANG $CACHE
    file: script
- extract:
    dst: $GAMEDIR/drive_c/GOG Games/Rune Gold
    file: $CACHE/rune_lang_$INPUT_LANG.tar.xz
- move:
    dst: $GAMEDIR/drive_c/GOG Games/Rune Gold/System/backup
    src: $GAMEDIR/drive_c/GOG Games/Rune Gold/System/Default.ini
- move:
    dst: $GAMEDIR/drive_c/GOG Games/Rune Gold/System/backup
    src: $GAMEDIR/drive_c/GOG Games/Rune Gold/System/Rune.ini
- merge:
    dst: $GAMEDIR/drive_c/GOG Games/Rune Gold/System
    src: game_conf
- write_config:
    data:
      Engine.Engine:
        Language: $INPUT_LANG
      WinDrv.WindowsClient:
        FullscreenViewportX: $RESOLUTION_WIDTH
        FullscreenViewportY: $RESOLUTION_HEIGHT
    file: $GAMEDIR/drive_c/GOG Games/Rune Gold/System/Default.ini
    merge: true
- extract:
    dst: $CACHE
    file: wrapper
- copy:
    dst: $GAMEDIR/drive_c/GOG Games/Rune Gold/System
    src: $CACHE/MS/x86/D3D9.dll
- copy:
    dst: $GAMEDIR/drive_c/GOG Games/Rune Gold/System
    src: $CACHE/dgVoodooCpl.exe
- write_file:
    content: '[DirectX]

      VRAM=4096

      VideoCard=internal3D

      dgVoodooWatermark=False

      Antialiasing=4x'
    file: $GAMEDIR/drive_c/GOG Games/Rune Gold/System/dgVoodoo.conf
system:
  env:
    DXVK_FRAME_RATE: '60'
    DXVK_HUD: null
wine:
  overrides:
    d3d9: n,b
